<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Compute dynamic swath windows — Cdsw-class • prozor</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Compute dynamic swath windows — Cdsw-class" />
<meta property="og:description" content="initialize
create equidistant breaks
quantile breaks
sampling breaks
barplot showing the number of precursors per window
Table with window boundaries and statistics
summary of the binning process (see objectiveMS1Function for more details)
moves window start and end to region with as few as possible precursor masses
shows the generated DIA cycle" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">prozor</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/cdsw.html">Computing Dynamic SWATH Windows</a>
    </li>
    <li>
      <a href="../articles/CreatingDecoyDB.html">Creating Target Decoy Databases</a>
    </li>
    <li>
      <a href="../articles/PeptideAnnotationwithProzor.html">Peptide Annotation and Protein Inference</a>
    </li>
    <li>
      <a href="../articles/TargetDecoyFDR_Example.html">Target Decoy FDR</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/protviz/prozor/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Compute dynamic swath windows</h1>
    <small class="dont-index">Source: <a href='https://github.com/protviz/prozor/blob/master/R/cdsw.R'><code>R/cdsw.R</code></a></small>
    <div class="hidden name"><code>Cdsw-class.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>initialize</p>
<p>create equidistant breaks</p>
<p>quantile breaks</p>
<p>sampling breaks</p>
<p>barplot showing the number of precursors per window</p>
<p>Table with window boundaries and statistics</p>
<p>summary of the binning process (see objectiveMS1Function for more details)</p>
<p>moves window start and end to region with as few as possible precursor masses</p>
<p>shows the generated DIA cycle</p>
    </div>


    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>list</th>
      <td><p>of masses</p></td>
    </tr>
    <tr>
      <th>nbins</th>
      <td><p>number of bins default 25</p></td>
    </tr>
    <tr>
      <th>maxwindow</th>
      <td><p>largest window size</p></td>
    </tr>
    <tr>
      <th>minwindow</th>
      <td><p>smallest window size</p></td>
    </tr>
    <tr>
      <th>digits</th>
      <td><p>mass precision default 2</p></td>
    </tr>
    <tr>
      <th>digigits</th>
      <td><p>mass precision</p></td>
    </tr>
    <tr>
      <th>max</th>
      <td><p>number of bins</p></td>
    </tr>
    <tr>
      <th>plot</th>
      <td><p>default TRUE</p></td>
    </tr>
    <tr>
      <th>overlap</th>
      <td><p>size of window overlap default 1 m/z</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>array of masses</p>
<p>array with masses</p>
<p>array with masses</p>
<p>data.frame with columns:
- from (window start)
- to (window end)
- mid (window centre), width (window width)
- counts expected number of precursors</p>
<p>list with optimization scores</p>
<p>data.frame with optimized windows</p>
    <h2 class="hasAnchor" id="fields"><a class="anchor" href="#fields"></a>Fields</h2>

    

<dl>
<dt><code>masses</code></dt><dd><p>MS1 masses</p></dd>

<dt><code>breaks</code></dt><dd><p>the breaks</p></dd>

<dt><code>nbins</code></dt><dd><p>number of bins</p></dd>

<dt><code>digits</code></dt><dd><p>mass accuracy in result</p></dd>

</dl>
    <h2 class="hasAnchor" id="methods"><a class="anchor" href="#methods"></a>Methods</h2>

    

<dl>
<dt><code>asTable(overlap = 1)</code></dt><dd><p>make windows</p></dd>

<dt><code>error()</code></dt><dd><p>show error</p></dd>

<dt><code>optimizeWindows(digits = 1, maxbin = 15, plot = FALSE, overlap = 0)</code></dt><dd><p>optimizes the windows</p></dd>

<dt><code>quantile_breaks(digits = 2)</code></dt><dd><p>same number of MS1 in each window but might violate hard constraints</p></dd>

<dt><code>sampling_breaks(maxwindow = 150, minwindow = 5, digits = 2, plot = FALSE)</code></dt><dd><p>starts with quantile breaks but mixes with uniform data to satisfy had constraints</p></dd>

</dl>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='r-in'><span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='va'>masses</span><span class='op'>)</span></span>
<span class='r-in'><span class='va'>cdsw</span> <span class='op'>&lt;-</span> <span class='fu'>Cdsw</span><span class='op'>(</span><span class='va'>masses</span><span class='op'>)</span></span>
<span class='r-in'><span class='va'>tmp</span> <span class='op'>&lt;-</span> <span class='va'>cdsw</span><span class='op'>$</span><span class='fu'>sampling_breaks</span><span class='op'>(</span>maxwindow<span class='op'>=</span><span class='fl'>100</span>,plot<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span></span>
<span class='r-plt img'><img src='Cdsw-class-1.png' alt='' width='700' height='433' /></span>
<span class='r-in'><span class='va'>cdsw</span><span class='op'>$</span><span class='fu'>plot</span><span class='op'>(</span><span class='op'>)</span></span>
<span class='r-plt img'><img src='Cdsw-class-2.png' alt='' width='700' height='433' /></span>
<span class='r-in'><span class='va'>cdsw</span><span class='op'>$</span><span class='fu'>asTable</span><span class='op'>(</span><span class='op'>)</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>        from      to      mid  width counts</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 0%   349.63  381.69  365.660  32.06   6098</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 4%   380.69  408.69  394.690  28.00   6428</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 8%   407.69  432.39  420.040  24.70   6553</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 12%  431.39  455.19  443.290  23.80   6612</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 16%  454.19  476.44  465.315  22.25   6622</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 20%  475.44  497.08  486.260  21.64   6678</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 24%  496.08  517.97  507.025  21.89   6752</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 28%  516.97  538.78  527.875  21.81   6717</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 32%  537.78  559.80  548.790  22.02   6701</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 36%  558.80  580.86  569.830  22.06   6662</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 40%  579.86  602.86  591.360  23.00   6679</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 44%  601.86  626.05  613.955  24.19   6640</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 48%  625.05  649.83  637.440  24.78   6539</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 52%  648.83  674.86  661.845  26.03   6405</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 56%  673.86  700.87  687.365  27.01   6405</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 60%  699.87  728.40  714.135  28.53   6295</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 64%  727.40  758.26  742.830  30.86   6150</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 68%  757.26  790.59  773.925  33.33   6136</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 72%  789.59  826.63  808.110  37.04   5997</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 76%  825.63  867.13  846.380  41.50   5802</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 80%  866.13  912.57  889.350  46.44   5481</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 84%  911.57  963.95  937.760  52.38   5115</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 88%  962.95 1027.00  994.975  64.05   4654</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 92% 1026.00 1100.73 1063.365  74.73   4121</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 96% 1099.73 1200.48 1150.105 100.75   3121</span>
<span class='r-in'><span class='va'>cdsw</span><span class='op'>$</span><span class='va'>breaks</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>      0%      4%      8%     12%     16%     20%     24%     28%     32%     36% </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  350.13  381.19  408.19  431.89  454.69  475.94  496.58  517.47  538.28  559.30 </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>     40%     44%     48%     52%     56%     60%     64%     68%     72%     76% </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  580.36  602.36  625.55  649.33  674.36  700.37  727.90  757.76  790.09  826.13 </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>     80%     84%     88%     92%     96%    100% </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  866.63  912.07  963.45 1026.50 1100.23 1199.98 </span>
<span class='r-in'><span class='va'>cdsw</span><span class='op'>$</span><span class='fu'>optimizeWindows</span><span class='op'>(</span><span class='op'>)</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>       from      to     mid width counts</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 1   350.13  381.35  365.74 31.22   6053</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 2   381.05  408.35  394.70 27.30   6304</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 3   408.15  431.95  420.05 23.80   6319</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 4   431.85  454.85  443.35 23.00   6449</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 5   454.65  476.05  465.35 21.40   6362</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 6   475.85  496.85  486.35 21.00   6526</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 7   496.45  517.85  507.15 21.40   6587</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 8   517.45  538.45  527.95 21.00   6492</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 9   538.15  559.45  548.80 21.30   6508</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 10  559.15  580.45  569.80 21.30   6448</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 11  580.15  602.45  591.30 22.30   6526</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 12  602.15  626.05  614.10 23.90   6604</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 13  625.45  649.45  637.45 24.00   6338</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 14  649.25  674.45  661.85 25.20   6248</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 15  674.25  700.45  687.35 26.20   6277</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 16  700.25  728.15  714.20 27.90   6163</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 17  727.75  758.15  742.95 30.40   6117</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 18  757.75  790.15  773.95 32.40   5970</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 19  789.65  826.15  807.90 36.50   5928</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 20  825.65  866.65  846.15 41.00   5733</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 21  866.55  912.15  889.35 45.60   5353</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 22  912.05  963.55  937.80 51.50   5057</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 23  963.35 1026.65  995.00 63.30   4612</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 24 1026.45 1100.25 1063.35 73.80   4081</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 25 1100.15 1200.05 1150.10 99.90   3101</span>
<span class='r-in'><span class='va'>cdsw</span><span class='op'>$</span><span class='fu'>showCycle</span><span class='op'>(</span><span class='op'>)</span></span>
<span class='r-plt img'><img src='Cdsw-class-3.png' alt='' width='700' height='433' /></span>
</pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Witold Wolski.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


